{% extends 'share/base_site.html' %}

{% load i18n %}

{% block content %}

<div>
    <br>
    <h2>Contribute</h2>
    <p>This is where you can contribute:</p>
      {% if not user.is_authenticated %}
        <p class="alert alert-warning">But you need to be login</p>
      {% elif request.user.is_authenticated and not request.user.profile.has_used_suggested_words_limit %}
        <div class="row">
          <div class="col-md-5">
             <div class="list-group">

                 <!-- Button trigger modal -->
                 <a href="" class="list-group-item" data-toggle="modal"
                         data-target="#suggest_modal">{% trans "Suggest Word" %}</a>

                 <!-- Modal -->
                 <div class="modal fade" id="suggest_modal" tabindex="-1" role="dialog" aria-labelledby="suggest_modal_label">
                   <div class="modal-dialog" role="document">
                     <div class="modal-content">
                       <div class="modal-body">
                           <form id="add_word_form" class="form-horizontal" role="form" action="{% url 'word:suggest_view' %}" method="post">
                              {% csrf_token %}
                              <div class="form-group">
                                <label class="col-sm-2 control-label"
                                          for="add_word_word">{% trans "Word" %}*</label>
                                <div class="col-sm-10">
                                    <input type="text" class="form-control"
                                    id="add_word_word" name="word" required />
                                </div>
                              </div>
                              <div class="form-group">
                                <label class="col-sm-2 control-label"
                                      for="add_word_version" >{% trans "Word Version" %}</label>
                                <div class="col-sm-10">
                                  <select id="add_word_version" name="language">
                                    <option disabled selected value> --- </option>
                                    {% for lan in language %}
                                      <option value="{{ lan.id }}">{% trans lan.name %}</option>
                                    {% endfor %}
                                  </select>
                                </div>
                              </div>
                              <div class="form-group">
                                <label class="col-sm-2 control-label" for="add_word_description_short">{% trans "Short Description" %}</label>
                                <div class="col-sm-10">
                                  <textarea class="form-control" id="add_word_description_short" name="desc_short"></textarea>
                                </div>
                              </div>
                              <div class="form-group">
                                <label class="col-sm-2 control-label" for="add_word_description_short">{% trans "Audio" %}</label>
                                <div class="col-sm-10">

                                    <input type="file" name="myfile"/>

                                    {% if uploaded_file_url %}
                                      <p>File uploaded at: <a href="{{ uploaded_file_url }}">{{ uploaded_file_url }}</a></p>
                                    {% endif %}

                                </div>
                              </div>
                              <div class="form-group">
                                <label class="col-sm-2 control-label" for="select_tag">{% trans "Tags" %}</label>
                                <div class="col-sm-10">
                                    {% if user_moderator %}
                                      <select id="select-moderator" name="tags">
                                        <option disabled selected value> --- </option>
                                        {% for tag in tags %}
                                          <option value="{{ tag.id }}">{% trans tag.name %}</option>
                                        {% endfor %}
                                      </select>
                                    {% else %}
                                      <select id="select-no-moderator" name="tags">
                                        <option disabled selected value> --- </option>
                                        {% for tag in tags %}
                                          <option value="{{ tag.id }}">{% trans tag.name %}</option>
                                        {% endfor %}
                                      </select>
                                    {% endif %}
                                </div>
                              </div>
                              <div class="form-group">
                              <a class="col-sm-2 link">advanced</a>
                              </div>
                               <div class="advanced-options">
                                  <div class="form-group">
                                    <label class="col-sm-2 control-label"
                                              for="add_word_ipa">{% trans "IPA" %}</label>
                                    <div class="col-sm-10">
                                        <input type="text" class="form-control"
                                        id="add_word_ipa" name="ipa"/>
                                    </div>
                                  </div>
                                  <div class="form-group">
                                    <label class="col-sm-2 control-label" for="add_word_description_long">{% trans "Description" %}</label>
                                    <div class="col-sm-10">
                                      <textarea class="form-control" id="add_word_description_long" name="desc_long"></textarea>
                                    </div>
                                  </div>
                                  <div class="form-group">
                                    <label class="col-sm-2 control-label"
                                              for="add_wik_link">{% trans "Wiktionary link" %}</label>
                                    <div class="col-sm-10">
                                        <input type="text" class="form-control"
                                        id="add_wik_link" name="wiktionary_link"/>
                                    </div>
                                  </div>
                                  <div class="form-group">
                                    <label class="col-sm-2 control-label" for="select_synonym">{% trans "Synonyms" %}</label>
                                    <div class="col-sm-10">
                                        <select id="select_synonym" name="synonyms">
                                            <option disabled selected value> ------- </option>
                                            {% for synonym in synonyms %}
                                              <option value="{{ synonym.id }}">{% trans synonym.word %}</option>
                                            {% endfor %}
                                        </select>
                                    </div>
                                  </div>

                              </div>

                              <div class="form-group">
                                <div class="col-sm-10">
                                  <button type="submit" class="btn">{% trans "Suggest" %}</button>
                                </div>
                              </div>
                            </form>

                       </div>
                     </div>
                   </div>
                 </div>

                 <a href="" class="list-group-item">Random in progress word</a>
              </div>
          </div>
        </div>
      {% endif %}

</div>

<script>
$(document).ready(function(){
    $('#suggest_modal').on('click', '.link', function () {

         $('.advanced-options').slideToggle("fast");
    });
    $('#select-moderator').selectize({
    create: true,
     maxItems: 4
});
    $('#select-no-moderator').selectize({
    maxItems: 4
});
});
</script>

{% endblock %}